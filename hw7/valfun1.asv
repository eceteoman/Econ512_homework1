
function val=valfun1(w1, w2, p1)

global v0 p01 p02 beta;


d1(p1,p2(w1,w2))(p1-c(w1))

+

d1(p1,p2(w1,w2))*v0



%We punish negative consumption and calculate v otherwise

if u1==1
    if c<=0 
        val = -99999999999999+9999999999999999*c;
    else
        val=log(c) + beta*vtil;
    end
end

if u1==2
    if c<=0
        val = -9999999999999999999999999999999999999999;
    else
        val=(1/(1-s))*(c^(1-s)-1) + beta*vtil;
    end
end

   
val = -val;
end